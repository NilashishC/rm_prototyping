- name: Set some values
  set_fact:
    config_1:
    - name: GigabitEthernet1
      description: my_desc
      enable: true
    config_2:
    - name: GigabitEthernet1
      description: my_desc_xxxxxx
      enable: true

- name: Set the description
  ios_interfaces:
    config: "{{ config_1 }}"
    state: merged

- name: Set the description
  ios_interfaces:
    config: "{{ config_2 }}"
    state: replaced
  register: result

- name: Reset config
  ios_interfaces:
    state: deleted

- name: Check the description
  assert:
    that: "{{ result['before']|selectattr('name', 'equalto', 'GigabitEthernet1')|list == config_1 }}"

- name: Check the description
  assert:
    that: "{{ result['after']|selectattr('name', 'equalto', 'GigabitEthernet1')|list == config_2 }}"
